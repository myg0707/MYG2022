# 群聊聊天室
* 功能 ： 类似qq群功能
【1】 有人进入聊天室需要输入姓名，姓名不能重复
【2】 有人进入聊天室时，其他人会收到通知：xxx 进入了聊天室
【3】 一个人发消息，其他人会收到：xxx ： xxxxxxxxxxx
【4】 有人退出聊天室，则其他人也会收到通知:xxx退出了聊天室
【5】 扩展功能：服务器可以向所有用户发送公告:管理员消息： xxxxxxxxx

聊天室思路分析：确定需求 -> 考虑可能的技术点 -> 结构封装设计 -> 模块分析 -> 编写代码 -> 功能测试

1. 需求分析：干什么 达到什么效果

2. 技术点的确定
    * 数据如何流动
        转发：客户端-->服务端-->其他客户端
    * 网络模型如何构建
        构建UDP数据传输
    * 用户信息在哪维护？怎么维护
        服务端：{name:address}
               [(name,address)]
    * 随意收发消息如何避免阻塞
        收发分别使用不同的进程执行

3. 结构设计注意事项
    * 采用什么封装结构：函数
        * 函数的参数根据函数的功能定义
    * 编写一个功能测试一个功能
    * 注意注释和结构的设计

4. 分析功能模块
    * 网络搭建
    * 进入聊天室
        * 客户端
            * 输入姓名
            * 将请求发送给服务器
            * 接收结果
            * 允许则可以聊天，不允许则重新输入姓名
        * 服务端
            * 接收请求
            * 处理请求，判断是否用户名已存在
            * 如果允许进入则将用户存储，通知其他客户端
            * 不允许则结束
            * 将结果通知客户端
    * 聊天
        * 客户端:
            * 创建新的进程
            * 一个进程发送消息
            * 一个进程接收消息
        * 服务端
            * 接收请求
            * 判断请求类型
            * 转发消息
    * 退出聊天室
        * 客户端：
            * 输入quit或者ctrl+c退出
            * 将请求发送给服务端
            * 结束进程
        * 服务端：
            * 接收请求
            * 将退出消息发送其他人
            * 给该用户发送EXIT
            * 删除用户
    * 管理员消息

5. 通信协议设置
    * 进入聊天室：L
    * 聊天：C
    * 退出聊天室：Q
    * 服务器反馈：OK 表示成功 / 其他表示失败
    * 客户端收到EXIT 退出接收进程
